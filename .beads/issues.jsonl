{"id":"parcer-06l","title":"Implement contract testing","description":"Add contract tests in pkg/ftp/contract_test.go to verify real/mock implementations match interface contracts. Prevents interface drift.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:33.108899916+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.836437994+07:00","closed_at":"2026-01-06T19:01:34.836437994+07:00","close_reason":"Closed"}
{"id":"parcer-0lc","title":"Add data export API","description":"Create export API in pkg/exporter with CSV/JSON/Excel formats. Query by date range, kassa codes, transaction types. Useful for reports and analytics.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:17.136839091+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.821920711+07:00","closed_at":"2026-01-06T19:01:36.821920711+07:00","close_reason":"Closed"}
{"id":"parcer-1sb","title":"Apply interface segregation principle","description":"Split large DatabasePool interface into smaller interfaces: TransactionManager, DataLoader, QueryExecutor. Easier mocking and testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:32.494850659+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.990631528+07:00","closed_at":"2026-01-06T19:01:34.990631528+07:00","close_reason":"Closed"}
{"id":"parcer-2sg","title":"Add webhook request signature verification","description":"Implement HMAC signature verification in pkg/webhook/signature.go. Prevents webhook spoofing with X-Webhook-Signature header validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:55:59.778178811+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.810856116+07:00","closed_at":"2026-01-06T19:01:35.810856116+07:00","close_reason":"Closed"}
{"id":"parcer-341","title":"Add circuit breaker for FTP operations","description":"Implement circuit breaker in pkg/resilience using gobreaker. Prevents cascade failures on repeated FTP errors. Auto-recovery after timeout.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:54.819947048+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.336363938+07:00","closed_at":"2026-01-06T19:01:36.336363938+07:00","close_reason":"Closed"}
{"id":"parcer-34h","title":"Enhance CLI with cobra framework","description":"Rebuild frontol CLI in cmd/frontol-cli using cobra. Commands: load, validate, status, retry, stats. Better UX for operators.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:56.844803593+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.915866772+07:00","closed_at":"2026-01-06T19:01:35.915866772+07:00","close_reason":"Closed"}
{"id":"parcer-3it","title":"Audit report and remediation plan","description":"Audit report + remediation plan (draft):\n\nHigh (P1)\n- Unauthenticated API if WEBHOOK_BEARER_TOKEN empty. Risk: external trigger/abuse of ETL. Fix: enforce non-empty token in prod; fail startup if missing; document rotation. Owners: backend/ops. ETA: 1-2 days.\n- Unencrypted FTP for sensitive data (loyalty IDs/phone). Risk: interception. Fix: use FTPS/SFTP or private network/VPN tunnel; enforce TLS; verify certs. Owners: ops/infra. ETA: 1-2 weeks.\n- DB SSL mode default disable. Risk: data-in-transit exposure. Fix: set DB_SSLMODE=require/verify-full in prod; enforce in config. Owners: ops. ETA: 1 day.\n\nMedium (P2)\n- .env with real credentials exists locally; risk of leakage. Fix: rotate secrets; use secrets manager; tighten access. Owners: ops. ETA: 1-2 days.\n- No audit logging/monitoring/SIEM; limited detection. Fix: central logging, alerting on auth failures/queue spikes; add audit events. Owners: ops/backend. ETA: 1-2 weeks.\n- Webhook reports sent without auth/signature. Risk: spoofing or data exfiltration if URL compromised. Fix: sign payloads (HMAC), allowlist, TLS. Owners: backend. ETA: 1 week.\n\nLow (P3)\n- Default FTP/DB passwords in examples and compose files can be reused accidentally. Fix: remove default weak values in prod configs; add warnings/validation. Owners: backend/docs. ETA: 1 week.\n- No formal DR/runbooks or restore tests (only DB backups). Fix: define RTO/RPO, restore drills. Owners: ops. ETA: 2-4 weeks.\n\nVerification\n- Add checks in CI/deploy: fail if WEBHOOK_BEARER_TOKEN empty in prod, DB_SSLMODE not require/verify-full; verify FTP over TLS or VPN path; rotate and document secrets; update docs if changes.\n\nScope context\n- Environments: dev + prod (cloud). Data: loyalty identifiers + phone numbers. External integrations: FTP, DB, webhook report. Roles: single admin. SLA: none defined. Backups: DB only.\n","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-12T15:35:29.180501823+07:00","created_by":"nikita","updated_at":"2026-01-12T15:51:29.315707249+07:00"}
{"id":"parcer-3s8","title":"Фича-флаг и обратимая раскатка slog/Zerolog","description":"Добавить конфигурацию/фича-флаг для выбора бэкенда логирования (slog vs Zerolog) на время миграции. Обеспечить безопасный переключатель для окружений, дефолт на Zerolog для webhook-server, fallback на slog доступен. Обновить документацию конфигов/env о флаге.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T17:46:56.354365376+07:00","created_by":"nikita","updated_at":"2026-01-13T18:19:22.623565229+07:00","closed_at":"2026-01-13T18:19:22.623565229+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-3s8","depends_on_id":"parcer-6ic","type":"blocks","created_at":"2026-01-13T17:47:12.111577982+07:00","created_by":"nikita"}]}
{"id":"parcer-3td","title":"Improve structured logging","description":"Enhance logger in pkg/logger with field helpers (WithKassa, WithFile). Consistent log fields across codebase for better searchability.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:13.692067308+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.215104243+07:00","closed_at":"2026-01-06T19:01:35.215104243+07:00","close_reason":"Closed"}
{"id":"parcer-3v3","title":"Add rate limiting middleware","description":"Implement rate limiter in pkg/middleware/ratelimit.go using golang.org/x/time/rate. Protect against DoS attacks. Configurable per-IP and per-token limits.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:30.260548054+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.503886282+07:00","closed_at":"2026-01-06T19:01:34.503886282+07:00","close_reason":"Closed"}
{"id":"parcer-40a","title":"Add AllowZero to TxColumnSpec and row building","description":"Add AllowZero flag to TxColumnSpec and update buildTxRow/safeValue logic to respect it.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T13:55:08.998151516+07:00","created_by":"nikita","updated_at":"2026-01-08T13:57:04.757950411+07:00","closed_at":"2026-01-08T13:57:04.757950411+07:00","close_reason":"Added AllowZero to TxColumnSpec and respected it in buildTxRow"}
{"id":"parcer-40h","title":"Add operation type caching","description":"Cache operation types in pkg/repository/operation_cache.go with periodic refresh. Eliminates thousands of DB queries per ETL run.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:04.343839697+07:00","created_by":"nikita","updated_at":"2026-01-05T13:06:38.970202757+07:00","closed_at":"2026-01-05T13:06:38.970202757+07:00","close_reason":"Closed"}
{"id":"parcer-43z","title":"Rewrite parser mapping to emit tx_* models","description":"Update dispatcher/mappers to parse Frontol rows into tx_* model structs with correct date/time types and source_folder injection.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T19:07:47.773612055+07:00","created_by":"nikita","updated_at":"2026-01-07T19:48:51.773183105+07:00","closed_at":"2026-01-07T19:48:51.773183105+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-43z","depends_on_id":"parcer-a6x","type":"blocks","created_at":"2026-01-07T19:13:08.374860167+07:00","created_by":"nikita"}]}
{"id":"parcer-4at","title":"Add distributed tracing with OpenTelemetry","description":"Instrument pipeline with OpenTelemetry in pkg/tracing. Export traces to Jaeger. Essential for debugging cross-stage issues.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:32.084504309+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.184315566+07:00","closed_at":"2026-01-06T19:01:34.184315566+07:00","close_reason":"Closed"}
{"id":"parcer-4xk","title":"Add code generation for transaction types","description":"Create scripts/generate-transaction.go tool. Auto-generates model, parser, loader, migration, and tests for new transaction types. Reduces boilerplate.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:03.276365269+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.335646651+07:00","closed_at":"2026-01-06T19:01:35.335646651+07:00","close_reason":"Closed"}
{"id":"parcer-5av","title":"Operational security review","description":"Operational review findings: runtime auth can be disabled by empty WEBHOOK_BEARER_TOKEN; if unset in prod, API endpoints are unauthenticated. FTP server has no TLS (GetTLSConfig returns nil) and client uses plain FTP; sensitive loyalty IDs/phones traverse FTP unencrypted unless protected by network/VPN. DB SSL mode defaults to disable unless explicitly set; ensure require/verify-full in prod. Logging is structured but no PII redaction/masking; errors and raw data may be logged if propagated (review log payloads before production). No monitoring/SIEM and no explicit audit logging; webhook reports sent to external URL without auth/signature noted. Backups/DR minimal (only DB backups) and no stated restore testing or log retention policies.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-12T15:35:26.542758673+07:00","created_by":"nikita","updated_at":"2026-01-12T15:46:42.296651127+07:00"}
{"id":"parcer-5bt","title":"Update docs for zero-valid fields","description":"Align docs/database/TRANSACTION_TABLES_SPEC.md with zero-valid fields (operation_type, item_type_code, etc.).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T13:55:11.197820458+07:00","created_by":"nikita","updated_at":"2026-01-08T13:58:23.378264414+07:00","closed_at":"2026-01-08T13:58:23.378264414+07:00","close_reason":"Docs already updated for zero-valid fields; no further changes needed now"}
{"id":"parcer-5re","title":"Update docs/tests for tx_* rewrite","description":"Refresh PARSERS_TO_TABLES_MAPPING.md and add unit tests for parsers/loaders/export queries per new schema.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T19:08:00.311986282+07:00","created_by":"nikita","updated_at":"2026-01-07T20:03:24.431910764+07:00","closed_at":"2026-01-07T20:03:24.431910764+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-5re","depends_on_id":"parcer-u5a","type":"blocks","created_at":"2026-01-07T19:13:16.038921678+07:00","created_by":"nikita"}]}
{"id":"parcer-5xf","title":"Create test data builders","description":"Add builder pattern for test data in tests/builders. Simplify test setup with fluent API for creating transactions, files, etc.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:31.795223526+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.256297175+07:00","closed_at":"2026-01-06T19:01:34.256297175+07:00","close_reason":"Closed"}
{"id":"parcer-5yk","title":"Enhance Makefile with useful targets","description":"Add Makefile targets: dev (live reload), test-watch, coverage (HTML report), bench (profiling), db-reset, security-scan, install-tools.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:56:33.678151413+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.564367737+07:00","closed_at":"2026-01-06T19:01:36.564367737+07:00","close_reason":"Closed"}
{"id":"parcer-63s","title":"Integrate Sentry error tracking","description":"Add Sentry integration in pkg/errors/sentry.go. Centralized error tracking with context, stack traces, and alerting.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:32.572580401+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.109831479+07:00","closed_at":"2026-01-06T19:01:34.109831479+07:00","close_reason":"Closed"}
{"id":"parcer-6ee","title":"Use PostgreSQL COPY for bulk loads","description":"Replace INSERT with COPY protocol in pkg/repository/copy_loader.go. Impact: 5-10x faster bulk data loading.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:30.784826297+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.412393544+07:00","closed_at":"2026-01-06T19:01:34.412393544+07:00","close_reason":"Closed"}
{"id":"parcer-6ic","title":"Миграция cmd/webhook-server на Zerolog","description":"Перенести cmd/webhook-server на Zerolog-обертку: заменить InfoContext/ErrorContext на Zerolog вызовы, типы slog.Logger -\u003e zerolog.Logger (или wrapper), сохранить имена полей и уровни, учесть контекст (request_id и др.). Обновить тесты/фикстуры на новый формат логов, убедиться что фильтр применяется.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T17:46:52.263160151+07:00","created_by":"nikita","updated_at":"2026-01-13T18:13:34.058059698+07:00","closed_at":"2026-01-13T18:13:34.058059698+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-6ic","depends_on_id":"parcer-9eq","type":"blocks","created_at":"2026-01-13T17:47:08.748555817+07:00","created_by":"nikita"}]}
{"id":"parcer-6qv","title":"Add E2E tests with testcontainers","description":"Create full E2E test suite in tests/e2e using testcontainers. Start Postgres/FTP/webhook server, seed data, verify end-to-end pipeline execution.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:56:01.180469064+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:33.954793177+07:00","closed_at":"2026-01-06T19:01:33.954793177+07:00","close_reason":"Closed"}
{"id":"parcer-6zc","title":"Run API unit tests and document how to execute","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T14:20:45.418471976+07:00","created_by":"nikita","updated_at":"2026-01-10T14:24:58.776898833+07:00","closed_at":"2026-01-10T14:24:58.776898833+07:00","close_reason":"Ran API unit tests and documented execution in testing guide","dependencies":[{"issue_id":"parcer-6zc","depends_on_id":"parcer-wto","type":"blocks","created_at":"2026-01-10T14:20:50.392403302+07:00","created_by":"nikita"}]}
{"id":"parcer-78q","title":"Extract FTP operations to service layer","description":"Create FTPService in pkg/services/ftp_service.go. Consolidates FTP logic: ListUnprocessedFiles, DownloadAndMarkProcessed, CleanupProcessedFiles.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:55:58.900050744+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.855868147+07:00","closed_at":"2026-01-06T19:01:35.855868147+07:00","close_reason":"Closed"}
{"id":"parcer-7bn","title":"Apply spec edits per table section","description":"Update TRANSACTION_TABLES_SPEC.md with explicit 0-valid notes per table/field.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T13:36:57.985546858+07:00","created_by":"nikita","updated_at":"2026-01-08T13:44:06.514586435+07:00","closed_at":"2026-01-08T13:44:06.514586435+07:00","close_reason":"Added zero-value notes to spec sections (operation_type, item_type_code, price_type)"}
{"id":"parcer-7pa","title":"Implement event-driven architecture","description":"Create event bus in pkg/events/bus.go. Publish pipeline events (file downloaded, parsed, loaded). Enables webhooks, notifications without modifying core.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:54.244219675+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.486854202+07:00","closed_at":"2026-01-06T19:01:36.486854202+07:00","close_reason":"Closed"}
{"id":"parcer-7sz","title":"Tune database connection pool","description":"Make DB pool configurable in pkg/db/postgres.go. Add env vars: DB_MAX_CONNS, DB_MIN_CONNS, DB_MAX_CONN_LIFETIME, DB_HEALTH_CHECK_PERIOD, query exec mode.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:03.735051554+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.284502921+07:00","closed_at":"2026-01-06T19:01:35.284502921+07:00","close_reason":"Closed"}
{"id":"parcer-89g","title":"Verify coverage and summarize doc changes","description":"Re-check spec vs PDF for missed 0 cases and add a brief changelog section or note in docs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T13:37:01.404177369+07:00","created_by":"nikita","updated_at":"2026-01-08T13:44:15.227517518+07:00","closed_at":"2026-01-08T13:44:15.227517518+07:00","close_reason":"Verified spec coverage for zero-valid fields against PDF; no additional updates needed"}
{"id":"parcer-8u9","title":"Implement unified error types","description":"Create AppError type in pkg/errors with error codes, context, wrapping. Enables structured error handling, categorization for metrics, better error messages.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:55:58.301804763+07:00","created_by":"nikita","updated_at":"2026-01-05T13:17:56.721717712+07:00","closed_at":"2026-01-05T13:17:56.721717712+07:00","close_reason":"Closed"}
{"id":"parcer-94r","title":"Implement audit logging","description":"Add audit logger in pkg/audit with separate audit_logs table. Track all operations with user/IP/timestamp/details. Essential for compliance.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:30.593504615+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.461661584+07:00","closed_at":"2026-01-06T19:01:34.461661584+07:00","close_reason":"Closed"}
{"id":"parcer-9aa","title":"Improve graceful shutdown","description":"Add configurable shutdown timeout, queue draining, and proper resource cleanup in pkg/server/shutdown.go. Current 30s timeout may be too short.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:02.501768199+07:00","created_by":"nikita","updated_at":"2026-01-05T11:02:46.638747126+07:00","closed_at":"2026-01-05T11:02:46.638747126+07:00","close_reason":"Closed"}
{"id":"parcer-9eq","title":"Базовая интеграция Zerolog и фильтра","description":"Добавить зависимость github.com/rs/zerolog, обновить pkg/logger (или эквивалент) для создания Zerolog логгера с Timestamp/TimeFieldFormat, сохранить текущие поля (event, request_id и т.д.). Реализовать фильтр по полю/allowlist через env (LOG_FILTER_FIELD, LOG_FILTER_ALLOW) на уровне writer, покрыть unit-тестами пропуск/фильтрацию и дефолтный pass-through.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T17:46:48.168916781+07:00","created_by":"nikita","updated_at":"2026-01-13T17:57:15.000369424+07:00","closed_at":"2026-01-13T17:57:15.000369424+07:00","close_reason":"Completed"}
{"id":"parcer-9lw","title":"Mark zero-valid columns in TxSchemas","description":"Set AllowZero=true for operation_type and other zero-valid fields across TxSchemas.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T13:55:10.04966366+07:00","created_by":"nikita","updated_at":"2026-01-08T13:58:09.002707293+07:00","closed_at":"2026-01-08T13:58:09.002707293+07:00","close_reason":"Set AllowZero on zero-valid columns in TxSchemas"}
{"id":"parcer-9nj","title":"Implement plugin architecture for transaction types","description":"Create processor registry in pkg/processor/registry.go. Allows adding transaction types without modifying core code. Enables third-party processors.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:29.224413826+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.700113009+07:00","closed_at":"2026-01-06T19:01:34.700113009+07:00","close_reason":"Closed"}
{"id":"parcer-9y4","title":"Add worker pool for file processing","description":"Implement bounded worker pool using semaphore in pkg/workers/pool.go. Prevents unbounded goroutine creation, controls memory usage.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:03.529002847+07:00","created_by":"nikita","updated_at":"2026-01-05T13:29:18.268162052+07:00","closed_at":"2026-01-05T13:29:18.268162052+07:00","close_reason":"Closed"}
{"id":"parcer-a0o","title":"Add multi-environment configuration","description":"Support dev/staging/production configs in pkg/config/environment.go. Base config + environment-specific overrides. Prevents config drift.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:55.579854868+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.131100872+07:00","closed_at":"2026-01-06T19:01:36.131100872+07:00","close_reason":"Closed"}
{"id":"parcer-a6x","title":"Define tx_* models and mapping structs","description":"Introduce/replace model structs matching tx_* tables and column types; keep raw_data/source_folder as needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T19:07:42.154704313+07:00","created_by":"nikita","updated_at":"2026-01-07T19:39:34.482804892+07:00","closed_at":"2026-01-07T19:39:34.482804892+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-a6x","depends_on_id":"parcer-go2","type":"blocks","created_at":"2026-01-07T19:13:05.824065122+07:00","created_by":"nikita"}]}
{"id":"parcer-au9","title":"Create data validation rules engine","description":"Build configurable validation rules engine in pkg/validation/rules.go. Define validation rules in config instead of hardcoding. Supports amount ranges, required fields, date checks.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:16.8979826+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.864005961+07:00","closed_at":"2026-01-06T19:01:36.864005961+07:00","close_reason":"Closed"}
{"id":"parcer-awm","title":"Create benchmark suite","description":"Add Go benchmarks in *_bench_test.go for parser, repository, pipeline. Detect performance regressions in CI.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:56.482351201+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.963616264+07:00","closed_at":"2026-01-06T19:01:35.963616264+07:00","close_reason":"Closed"}
{"id":"parcer-bjt","title":"Обновление документации по Zerolog","description":"Обновить docs/infrastructure/TECH_STACK.md, docs/infrastructure/ARCHITECTURE.md и ссылки в docs/README.md или docs/CONFIGURATION.md: отразить переход на Zerolog, новые переменные LOG_FILTER_FIELD/LOG_FILTER_ALLOW и фича-флаг slog/Zerolog, отметить формат логов/таймстемпы.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T17:47:03.991426779+07:00","created_by":"nikita","updated_at":"2026-01-13T18:24:04.992556667+07:00","closed_at":"2026-01-13T18:24:04.992556667+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-bjt","depends_on_id":"parcer-xhl","type":"blocks","created_at":"2026-01-13T17:47:18.044883001+07:00","created_by":"nikita"}]}
{"id":"parcer-bkh","title":"Update DB loaders to insert into tx_* tables","description":"Implement load functions per tx_* table and wire repository loader switches; preserve batching/retry.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T19:07:53.425853201+07:00","created_by":"nikita","updated_at":"2026-01-07T19:58:35.761113508+07:00","closed_at":"2026-01-07T19:58:35.761113508+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-bkh","depends_on_id":"parcer-43z","type":"blocks","created_at":"2026-01-07T19:13:11.02306031+07:00","created_by":"nikita"}]}
{"id":"parcer-c2q","title":"Фаза 1.3: Unit тесты для pkg/repository/loader.go (утилиты)","description":"Расширить pkg/repository/loader_test.go с тестами для: toInt64, toFloat64, toTime, formatTxValue, sliceLen.\n\nПРАВИЛА:\n- toTime: ТОЛЬКО type assertion (НЕ парсинг строк/форматов!)\n- formatTxValue: nil → \"\", Zero time → \"\"\n\n⚠️ КРИТИЧНО: NaN/Inf - точные строки гарантированы Go:\n  math.NaN() → \"NaN\"\n  math.Inf(1) → \"+Inf\"\n  math.Inf(-1) → \"-Inf\"\n\n- sliceLen: все nil случаи → 0, не-slice → -1\n\nПокрытие ~30 тест-кейсов. Прирост: +8%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-08T14:22:28.840964181+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.143146605+07:00","closed_at":"2026-01-10T00:12:47.536933346+07:00","dependencies":[{"issue_id":"parcer-c2q","depends_on_id":"parcer-sfq","type":"parent-child","created_at":"2026-01-08T14:26:57.100788516+07:00","created_by":"nikita"}]}
{"id":"parcer-c4k","title":"Implement SQL injection prevention","description":"Add table name whitelist in pkg/db/safe_query.go. Validate table names before string formatting. Use pgx.Identifier.Sanitize() for safe quoting.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:55:59.240589957+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.01206918+07:00","closed_at":"2026-01-06T19:01:34.01206918+07:00","close_reason":"Closed"}
{"id":"parcer-c8c","title":"Optimize FTP batch listing","description":"Batch FTP LIST operations in pkg/ftp/batch.go. Single LIST call + in-memory filtering instead of per-file checks. Impact: O(n) vs O(n²) operations.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:03.963919985+07:00","created_by":"nikita","updated_at":"2026-01-05T13:41:01.162589697+07:00","closed_at":"2026-01-05T13:41:01.162589697+07:00","close_reason":"Closed"}
{"id":"parcer-cag","title":"Implement AllowZero in tx schema","description":"Preserve valid 0 values in tx_* inserts by extending schema specs and load logic.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T13:55:07.833522231+07:00","created_by":"nikita","updated_at":"2026-01-08T13:59:26.453791657+07:00","closed_at":"2026-01-08T13:59:26.453791657+07:00","close_reason":"AllowZero support implemented, schemas updated, tests added","dependencies":[{"issue_id":"parcer-cag","depends_on_id":"parcer-40a","type":"blocks","created_at":"2026-01-08T13:55:16.046251935+07:00","created_by":"nikita"},{"issue_id":"parcer-cag","depends_on_id":"parcer-9lw","type":"blocks","created_at":"2026-01-08T13:55:17.74932638+07:00","created_by":"nikita"},{"issue_id":"parcer-cag","depends_on_id":"parcer-5bt","type":"blocks","created_at":"2026-01-08T13:55:17.821919576+07:00","created_by":"nikita"},{"issue_id":"parcer-cag","depends_on_id":"parcer-ekz","type":"blocks","created_at":"2026-01-08T13:55:18.045433282+07:00","created_by":"nikita"}]}
{"id":"parcer-ctn","title":"Optimize database indexes","description":"Add composite, partial, and expression indexes for common queries. Create indices on (transaction_date, source_folder), recent transactions, status fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:00.697232425+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.579619945+07:00","closed_at":"2026-01-06T19:01:35.579619945+07:00","close_reason":"Closed"}
{"id":"parcer-cyu","title":"Inventory handlers and dependencies for API unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:20:35.435303947+07:00","created_by":"nikita","updated_at":"2026-01-10T14:21:41.192431585+07:00","closed_at":"2026-01-10T14:21:41.192431585+07:00","close_reason":"Inventory completed; handlers and dependencies reviewed","dependencies":[{"issue_id":"parcer-cyu","depends_on_id":"parcer-d8k","type":"blocks","created_at":"2026-01-10T14:20:49.428982754+07:00","created_by":"nikita"}]}
{"id":"parcer-cyz","title":"Add multi-tenancy support","description":"Implement tenant isolation in pkg/tenant. Per-tenant FTP configs, database schemas, and kassa structures. Optional feature for SaaS deployments.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:17.516766181+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.724172116+07:00","closed_at":"2026-01-06T19:01:36.724172116+07:00","close_reason":"Closed"}
{"id":"parcer-d5r","title":"Create development setup script","description":"Add scripts/dev-setup.sh to automate local setup. Installs tools, starts Docker, runs migrations, seeds data, configures git hooks.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:02.873541144+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.368138487+07:00","closed_at":"2026-01-06T19:01:35.368138487+07:00","close_reason":"Closed"}
{"id":"parcer-d8k","title":"API unit tests with httptest","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T14:20:30.408563828+07:00","created_by":"nikita","updated_at":"2026-01-10T14:25:03.728586682+07:00","closed_at":"2026-01-10T14:25:03.728586682+07:00","close_reason":"All subtasks for API unit tests completed"}
{"id":"parcer-dlp","title":"Design httptest setup and fixtures for API endpoints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:20:39.875120944+07:00","created_by":"nikita","updated_at":"2026-01-10T14:22:34.688397349+07:00","closed_at":"2026-01-10T14:22:34.688397349+07:00","close_reason":"Test setup approach defined (httptest mux, auth middleware, queue stub)","dependencies":[{"issue_id":"parcer-dlp","depends_on_id":"parcer-cyu","type":"blocks","created_at":"2026-01-10T14:20:49.750661397+07:00","created_by":"nikita"}]}
{"id":"parcer-dsc","title":"Add secret management integration","description":"Create SecretManager interface in pkg/secrets with Vault/AWS Secrets Manager support. Production-ready secret handling, fallback to env for dev.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:33.500001429+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.76701222+07:00","closed_at":"2026-01-06T19:01:34.76701222+07:00","close_reason":"Closed"}
{"id":"parcer-egn","title":"Add fuzzing for parsers","description":"Create fuzz tests in pkg/parser/*_fuzz_test.go. Find edge cases in parsing logic. Ensures parser never panics on malformed input.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:01.599720142+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.512230999+07:00","closed_at":"2026-01-06T19:01:35.512230999+07:00","close_reason":"Closed"}
{"id":"parcer-ekd","title":"Add pprof profiling endpoints","description":"Enable pprof in pkg/server/profiling.go. CPU/heap/goroutine/mutex profiling. Protected endpoints for production debugging.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:56.14851213+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.015644666+07:00","closed_at":"2026-01-06T19:01:36.015644666+07:00","close_reason":"Closed"}
{"id":"parcer-ekz","title":"Add regression tests for zero handling","description":"Add tests ensuring tx_fiscal_payment_40 operation_type=0 and another field remain non-NULL.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T13:55:12.477162709+07:00","created_by":"nikita","updated_at":"2026-01-08T13:59:22.718202248+07:00","closed_at":"2026-01-08T13:59:22.718202248+07:00","close_reason":"Added regression test for AllowZero in buildTxRow"}
{"id":"parcer-f9x","title":"Rewrite DB migrations from DDL spec","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T18:56:40.906601738+07:00","created_by":"nikita","updated_at":"2026-01-06T19:02:29.644653342+07:00","closed_at":"2026-01-06T19:02:29.644653342+07:00","close_reason":"Completed"}
{"id":"parcer-fe6","title":"Add Prometheus metrics","description":"Instrument code with Prometheus metrics in pkg/metrics/prometheus.go. Track ETL duration, files processed, errors, FTP operations, DB connections, queue depth.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:05.031034812+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:33.881974231+07:00","closed_at":"2026-01-06T19:01:33.881974231+07:00","close_reason":"Closed"}
{"id":"parcer-fnl","title":"Implement incremental processing","description":"Add checkpoint-based incremental processing in pkg/pipeline/incremental.go. Process only new files since last checkpoint, avoiding full reloads.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:16.539968773+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.899747781+07:00","closed_at":"2026-01-06T19:01:36.899747781+07:00","close_reason":"Closed"}
{"id":"parcer-gbw","title":"Фаза 1.2: Unit тесты для pkg/db/postgres.go (конвертация)","description":"Расширить pkg/db/postgres_test.go с тестами для: convertToUTF8, safeValue, safeValueAllowZero.\n\n⚠️ КРИТИЧНО: convertToUTF8 ПОРТИТ валидный UTF-8!\n- ASCII → безопасно (идентичность)\n- CP1251 → корректная конвертация в UTF-8\n- UTF-8 строка → ИСПОРЧЕНА декодером (НЕ гарантируем идентичность!)\n- \"Битого CP1251\" НЕ существует (все байты валидны)\n\nКАНОНИЧЕСКИЕ ДАННЫЕ:\n- CP1251: []byte{0xCF,0xF0,0xE8,0xE2,0xE5,0xF2} → \"Привет\"\n- safeValue: \"\"/0/0.0 → nil, остальное → passthrough\n- safeValueAllowZero: \"\"/→ nil, 0/0.0 → сохраняются\n\nПокрытие ~25 тест-кейсов. Прирост: +10%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-08T14:22:28.49825416+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.145923781+07:00","closed_at":"2026-01-10T00:12:47.517321603+07:00","dependencies":[{"issue_id":"parcer-gbw","depends_on_id":"parcer-sfq","type":"parent-child","created_at":"2026-01-08T14:26:56.91201527+07:00","created_by":"nikita"}]}
{"id":"parcer-gfv","title":"Static analysis of repo and configs","description":"Static review findings (config/docs/code): .env exists in repo root with real-looking DB/FTP credentials (gitignored, but presence indicates secrets on disk; ensure not committed anywhere, rotate if shared). docker-compose.yml defaults DB_SSLMODE=disable and FTP_PASSWORD=frontol123; docker-compose.prod.yml uses default placeholders if env missing; ensure prod overrides all secrets and SSL mode. Bearer auth is optional; if WEBHOOK_BEARER_TOKEN is empty, API auth is disabled (code logs warning). FTP uses plain FTP (no TLS) in current implementation; sensitive data (loyalty IDs/phone) transits via FTP and DB; consider FTPS/SFTP or VPN/TLS tunnel. No CI workflows detected in repo tree (GitHub Actions referenced in docs; .github/ not present).","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-12T15:35:23.458498369+07:00","created_by":"nikita","updated_at":"2026-01-12T15:43:21.308101076+07:00"}
{"id":"parcer-gm9","title":"Add real-time notifications","description":"Create notification system in pkg/notifier with Slack/email/Telegram support. Notify on ETL completion, errors, threshold violations.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:17.71440218+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.692368363+07:00","closed_at":"2026-01-06T19:01:36.692368363+07:00","close_reason":"Closed"}
{"id":"parcer-go2","title":"Audit current parser/loader usage vs tx_* schema","description":"Review existing parser, loader, and export code to identify legacy table usage and map required changes to tx_* schema.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T19:07:38.416083809+07:00","created_by":"nikita","updated_at":"2026-01-07T19:15:37.430397457+07:00","closed_at":"2026-01-07T19:15:37.430397457+07:00","close_reason":"Completed"}
{"id":"parcer-gvy","title":"Implement constant-time token comparison","description":"Fix timing attack vulnerability in pkg/auth/auth.go:75. Use subtle.ConstantTimeCompare instead of direct string comparison. Quick security win.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:01.579276785+07:00","created_by":"nikita","updated_at":"2026-01-05T10:39:38.643922412+07:00","closed_at":"2026-01-05T10:39:38.643922412+07:00","close_reason":"Closed"}
{"id":"parcer-gyp","title":"Фаза 4: Unit тесты для pkg/ftp и pkg/pipeline (вспомогательные)","description":"Расширить pkg/ftp/ftp_test.go и pkg/pipeline/pipeline_test.go.\n\nПРИОРИТЕТ 1 (обязательно):\n- CreateRequestFile: добавить future date, leap year, invalid formats, garbage\n- RetryOperation: добавить context cancellation during retry\n\n⚠️ КРИТИЧНО: Отрицательный/нулевой delay → УСПЕХ (time.Sleep возвращается немедленно)\n\nПРИОРИТЕТ 2 (опционально):\n- GetAllKassaFolders, Pipeline structs - edge cases уже достаточно\n\nПокрытие ~15 тест-кейсов. Прирост: +5%","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T14:22:30.149912258+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.148233477+07:00","closed_at":"2026-01-10T00:12:47.591305773+07:00","dependencies":[{"issue_id":"parcer-gyp","depends_on_id":"parcer-sfq","type":"parent-child","created_at":"2026-01-08T14:26:58.275172841+07:00","created_by":"nikita"}]}
{"id":"parcer-hp2","title":"Security audit plan","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-12T15:35:12.242952672+07:00","created_by":"nikita","updated_at":"2026-01-12T15:35:12.242952672+07:00","dependencies":[{"issue_id":"parcer-hp2","depends_on_id":"parcer-yfj","type":"blocks","created_at":"2026-01-12T15:35:33.098223368+07:00","created_by":"nikita"},{"issue_id":"parcer-hp2","depends_on_id":"parcer-gfv","type":"blocks","created_at":"2026-01-12T15:35:36.391299045+07:00","created_by":"nikita"},{"issue_id":"parcer-hp2","depends_on_id":"parcer-5av","type":"blocks","created_at":"2026-01-12T15:35:39.931242635+07:00","created_by":"nikita"},{"issue_id":"parcer-hp2","depends_on_id":"parcer-3it","type":"blocks","created_at":"2026-01-12T15:35:43.117972967+07:00","created_by":"nikita"}]}
{"id":"parcer-j1q","title":"Inventory zero-valid fields from spec/PDF","description":"Compile list of columns where 0 is valid (spec + Frontol_6_Integration.pdf), including item_type_code field 32.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T13:36:54.449651178+07:00","created_by":"nikita","updated_at":"2026-01-08T13:42:15.460579867+07:00","closed_at":"2026-01-08T13:42:15.460579867+07:00","close_reason":"Compiled zero-valid fields from spec/PDF for doc updates"}
{"id":"parcer-jdm","title":"Build integration test framework","description":"Create testcontainers-based test framework in tests/integration/framework. Automates Postgres/FTP setup, provides fixtures and seed data helpers.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:04.715619377+07:00","created_by":"nikita","updated_at":"2026-01-05T14:22:24.842579396+07:00","closed_at":"2026-01-05T14:22:24.842579396+07:00","close_reason":"Closed"}
{"id":"parcer-kea","title":"Implement parallel database inserts","description":"Add parallel batch loading in pkg/repository/parallel_loader.go. Split data into batches, load with goroutines. Impact: 2-4x faster for 10K+ transactions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:00.01243532+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.740512103+07:00","closed_at":"2026-01-06T19:01:35.740512103+07:00","close_reason":"Closed"}
{"id":"parcer-knb","title":"Add TLS support for FTP connections","description":"Enable FTPS in pkg/ftp/ftp.go. Essential for production security. Configurable with FTP_USE_TLS and certificate verification options.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:55:58.639624168+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.043560529+07:00","closed_at":"2026-01-06T19:01:34.043560529+07:00","close_reason":"Closed"}
{"id":"parcer-lod","title":"Implement scheduled ETL jobs","description":"Add cron-based scheduler in pkg/scheduler using robfig/cron. Auto-trigger daily ETL runs, configurable schedules per operation type.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:17.338404801+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.774270374+07:00","closed_at":"2026-01-06T19:01:36.774270374+07:00","close_reason":"Closed"}
{"id":"parcer-mmh","title":"Remove duplicate processFile code","description":"Remove duplicate processFile() in pipeline.go:387-584. Keep only processFileWithMutex(). Impact: -200 lines, easier maintenance. Quick win.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:01.380745683+07:00","created_by":"nikita","updated_at":"2026-01-05T10:37:55.679141313+07:00","closed_at":"2026-01-05T10:37:55.679141313+07:00","close_reason":"Closed"}
{"id":"parcer-ms5","title":"Add strategy pattern for file processing","description":"Create processing strategies (parallel, sequential, batched) in pkg/pipeline/strategy.go. Configurable per-kassa or A/B testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:54.455635579+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.414658884+07:00","closed_at":"2026-01-06T19:01:36.414658884+07:00","close_reason":"Closed"}
{"id":"parcer-n87","title":"Фаза 1.1: Unit тесты для pkg/parser/mappers.go","description":"Создать pkg/parser/mappers_test.go с тестами для: parseFloatWithComma, safeParseInt, safeParseInt64, safeParseFloat.\n\nПРАВИЛА:\n- safeParse*: \"\" → 0 (БЕЗ ошибки!), ошибка парсинга → 0\n- parseFloatWithComma: ТОЛЬКО первая запятая заменяется (\"1,234.56\" → 1.234)\n- НЕТ поддержки тысячных разделителей (\"1,000\" → ошибка)\n\n⚠️ КРИТИЧНО: При ошибке parseFloat возвращает 0 (НЕ частичное значение)\n\"1,234,567\" → (0, error) - НЕ (1.234, error)\n\nПокрытие ~20 тест-кейсов. Прирост: +5%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-08T14:22:28.223939299+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.150259776+07:00","closed_at":"2026-01-10T00:12:47.497964589+07:00","dependencies":[{"issue_id":"parcer-n87","depends_on_id":"parcer-sfq","type":"parent-child","created_at":"2026-01-08T14:26:56.713016954+07:00","created_by":"nikita"}]}
{"id":"parcer-nrb","title":"Fix context propagation bug","description":"Fix pipeline.go:449-452 where context.Background() is used instead of propagating parent context. Bug fix, breaks cancellation chain.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:01.903162104+07:00","created_by":"nikita","updated_at":"2026-01-05T10:40:49.820318998+07:00","closed_at":"2026-01-05T10:40:49.820318998+07:00","close_reason":"Closed"}
{"id":"parcer-obk","title":"Фаза 2.1: Unit тесты для pkg/parser/tx_parsing.go (рефлексия)","description":"Создать pkg/parser/tx_parsing_test.go с тестами для: fillTxStruct (рефлексия), parseTxModel, wrapParsed, appendTx.\n\n⚠️ КРИТИЧНО: Nil pointer → PANIC (не error!)\nТест должен использовать defer recover()\n\nОБЯЗАТЕЛЬНЫЕ EDGE-КЕЙСЫ:\n- Ошибки рефлексии: not pointer, not struct, missing field, cannot set, wrong type\n- Все TxColumnKind: String, Int64, Float64, Date, Time, Source\n- Невалидные данные: пустые строки, overflow, bad format\n- Граничные: fields \u003c schema, fields \u003e schema, nil schema\n- Nil pointer → PANIC (тест через defer recover)\n\nПроверка ошибок: strings.Contains(err.Error(), \"ключевое слово\")\nНЕ строгое сравнение текстов.\n\nОжидаемый прирост: +10%","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T14:22:29.318074356+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.152034634+07:00","closed_at":"2026-01-10T00:12:47.554649985+07:00","dependencies":[{"issue_id":"parcer-obk","depends_on_id":"parcer-sfq","type":"parent-child","created_at":"2026-01-08T14:26:57.514083677+07:00","created_by":"nikita"}]}
{"id":"parcer-ojk","title":"Optimize Docker image build","description":"Improve Dockerfile with multi-stage build, cache mounts, non-root user. Reduce image from ~800MB to ~15MB. Faster builds with layer caching.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:01.950191247+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.438459279+07:00","closed_at":"2026-01-06T19:01:35.438459279+07:00","close_reason":"Closed"}
{"id":"parcer-opj","title":"Implement FTP connection pooling","description":"Replace single FTP connection with connection pool in pkg/ftp/pool.go. Eliminates mutex bottleneck. Impact: 5-10x throughput improvement.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:03.250517468+07:00","created_by":"nikita","updated_at":"2026-01-05T13:25:45.479479783+07:00","closed_at":"2026-01-05T13:25:45.479479783+07:00","close_reason":"Closed"}
{"id":"parcer-p8t","title":"Build input validation framework","description":"Create unified validation framework in pkg/validation. Supports composite validators, required fields, date formats, etc. Improves security and data quality.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:02.177649635+07:00","created_by":"nikita","updated_at":"2026-01-05T10:57:38.189587113+07:00","closed_at":"2026-01-05T10:57:38.189587113+07:00","close_reason":"Closed"}
{"id":"parcer-pgy","title":"Implement partial failure recovery","description":"Allow pipeline to continue on individual file failures. Return detailed report of succeeded/failed files instead of failing completely.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:31.461536145+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.327900185+07:00","closed_at":"2026-01-06T19:01:34.327900185+07:00","close_reason":"Closed"}
{"id":"parcer-qaf","title":"RabbitMQ queue integration rollout","description":"Plan from docs/tmp/rabbitmq_queue_integration.md to migrate webhook-server queues from in-memory to RabbitMQ with per-cashbox topology, retries, DLQ, and updated status API.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-13T18:48:16.178867443+07:00","created_by":"nikita","updated_at":"2026-01-13T19:45:01.928951473+07:00","closed_at":"2026-01-13T19:45:01.928951473+07:00","close_reason":"RabbitMQ queue integration delivered: load queues via RabbitMQ with retries/DLQ, status metrics, DLQ requeue; download remains synchronous by design."}
{"id":"parcer-qaf.1","title":"RabbitMQ topology and infrastructure setup","description":"Design exchanges/queues/bindings per docs/tmp/rabbitmq_queue_integration.md, add RabbitMQ service to docker-compose without external ports, and define credential generation approach.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T18:48:19.983999035+07:00","created_by":"nikita","updated_at":"2026-01-13T18:54:14.689836674+07:00","closed_at":"2026-01-13T18:54:14.689836674+07:00","close_reason":"Topology and infra staged: RabbitMQ service added to compose, env/doc updates, credential generator ready.","dependencies":[{"issue_id":"parcer-qaf.1","depends_on_id":"parcer-qaf","type":"parent-child","created_at":"2026-01-13T18:48:19.987751303+07:00","created_by":"nikita"}]}
{"id":"parcer-qaf.2","title":"Webhook-server producer/consumer migration","description":"Switch cmd/webhook-server enqueue/worker to RabbitMQ per-cashbox queues: publish with routing keys, durable messages, consumer prefetch=1, retry-with-backoff to retry exchange, DLQ handling, reconnection/redeclare logic.","notes":"Implemented RabbitMQ load consumer (prefetch=1, retry/DLQ routing, reconnection) and publish path; queue status now inspects broker queues when enabled. QUEUE_PROVIDER remains default=memory; download still uses in-memory queue. Pending: verify broker deployment, decide default switch to rabbitmq, add DLQ requeue job.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T18:48:24.06016834+07:00","created_by":"nikita","updated_at":"2026-01-13T19:44:56.284883868+07:00","closed_at":"2026-01-13T19:44:56.284883868+07:00","close_reason":"Webhook RabbitMQ integration done: load publish/consume, status metrics, DLQ controls; download intentionally left in-memory (streaming).","dependencies":[{"issue_id":"parcer-qaf.2","depends_on_id":"parcer-qaf","type":"parent-child","created_at":"2026-01-13T18:48:24.062170537+07:00","created_by":"nikita"},{"issue_id":"parcer-qaf.2","depends_on_id":"parcer-qaf.1","type":"blocks","created_at":"2026-01-13T18:48:24.065465518+07:00","created_by":"nikita"}]}
{"id":"parcer-qaf.3","title":"Queue status API and metrics update","description":"Update /api/queue/status to read RabbitMQ stats (total/per-op/per-queue counts) via management API or passive declare; expose health/reconnect state as needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T18:48:28.694544169+07:00","created_by":"nikita","updated_at":"2026-01-13T19:30:37.366881891+07:00","closed_at":"2026-01-13T19:30:37.366881891+07:00","close_reason":"Queue status now reports RabbitMQ metrics (total/per op/queues) with graceful fallback; provider default rabbitmq documented.","dependencies":[{"issue_id":"parcer-qaf.3","depends_on_id":"parcer-qaf","type":"parent-child","created_at":"2026-01-13T18:48:28.697326688+07:00","created_by":"nikita"},{"issue_id":"parcer-qaf.3","depends_on_id":"parcer-qaf.2","type":"blocks","created_at":"2026-01-13T18:48:28.700839026+07:00","created_by":"nikita"}]}
{"id":"parcer-qaf.4","title":"Recovery jobs, configuration, and docs","description":"Implement DLQ requeue cron/endpoint with safeguards, surface configuration knobs (RABBITMQ_URL, retry backoffs, DLQ requeue interval), and update docs/infrastructure and Frontol integration docs per RabbitMQ design.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T18:48:37.378292426+07:00","created_by":"nikita","updated_at":"2026-01-13T19:41:44.807040473+07:00","closed_at":"2026-01-13T19:41:44.807040473+07:00","close_reason":"Recovery controls added: RabbitMQ default provider, DLQ requeue config/endpoints, docs updated.","dependencies":[{"issue_id":"parcer-qaf.4","depends_on_id":"parcer-qaf","type":"parent-child","created_at":"2026-01-13T18:48:37.381318077+07:00","created_by":"nikita"},{"issue_id":"parcer-qaf.4","depends_on_id":"parcer-qaf.3","type":"blocks","created_at":"2026-01-13T18:48:37.385223346+07:00","created_by":"nikita"}]}
{"id":"parcer-qaf.5","title":"RabbitMQ DLQ requeue job and metrics","description":"Implement periodic DLQ requeue job/endpoint with safeguards (age threshold), and expose RabbitMQ metrics via management API (queue depths, consumer status) in /api/queue/status.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T19:24:46.355699948+07:00","created_by":"nikita","updated_at":"2026-01-13T19:41:39.627752579+07:00","closed_at":"2026-01-13T19:41:39.627752579+07:00","close_reason":"Manual DLQ requeue endpoint added with age/batch controls; metrics via management API in queue status.","dependencies":[{"issue_id":"parcer-qaf.5","depends_on_id":"parcer-qaf","type":"parent-child","created_at":"2026-01-13T19:24:46.359446919+07:00","created_by":"nikita"}]}
{"id":"parcer-qaf.6","title":"Download queue strategy with RabbitMQ","description":"Decide and implement download processing with RabbitMQ (per-operation queue) or keep in-memory with clear rationale; update docs/config accordingly.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-13T19:24:50.746385979+07:00","created_by":"nikita","updated_at":"2026-01-13T19:44:51.643909257+07:00","closed_at":"2026-01-13T19:44:51.643909257+07:00","close_reason":"Download remains in-memory due to streaming HTTP response; documented rationale and queue plan.","dependencies":[{"issue_id":"parcer-qaf.6","depends_on_id":"parcer-qaf","type":"parent-child","created_at":"2026-01-13T19:24:50.749038177+07:00","created_by":"nikita"}]}
{"id":"parcer-rr8","title":"Create Kubernetes deployment manifests","description":"Add K8s manifests in deployments/k8s: Deployment, Service, HPA, ConfigMap, Secret. Support horizontal scaling and rolling updates.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T09:55:17.960899887+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.646217181+07:00","closed_at":"2026-01-06T19:01:36.646217181+07:00","close_reason":"Closed"}
{"id":"parcer-sej","title":"Add value objects for domain concepts","description":"Create value objects in pkg/domain/values.go: Date, KassaCode, FolderPath. Type safety, validation at construction, prevents primitive obsession.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:32.259819791+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.072588608+07:00","closed_at":"2026-01-06T19:01:35.072588608+07:00","close_reason":"Closed"}
{"id":"parcer-sfq","title":"Unit тесты: повысить покрытие с 22.9% до 60%+","description":"План реализации unit тестов для повышения покрытия с 22.9% до 60%+. \n\n📋 Детальные спецификации:\n- /home/nikita/.claude/plans/unit-tests-detailed-spec.md\n- /home/nikita/.claude/plans/unit-tests-critical-answers.md (КРИТИЧЕСКИЕ УТОЧНЕНИЯ!)\n\n✅ ОФИЦИАЛЬНАЯ КОМАНДА ДЛЯ ФИКСАЦИИ:\ngo test -coverprofile=coverage.out -covermode=atomic ./pkg/...\ngo tool cover -func=coverage.out | tail -1\n\nВключает 4 фазы:\n- Фаза 1 (P0): Утилиты парсинга\n- Фаза 2 (P1): Парсинг с рефлексией  \n- Фаза 3 (P2): Диспетчеризация (50+ типов)\n- Фаза 4 (P3): Вспомогательные функции\n\nВсего ~145 тест-кейсов, ~600 строк кода.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-08T14:26:41.692779353+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.153797454+07:00","closed_at":"2026-01-10T00:12:51.006445032+07:00"}
{"id":"parcer-tlu","title":"Миграция логирования: slog -\u003e Zerolog","description":"Основано на docs/tmp/zerolog_migration.md. Цель: перевести сервис на Zerolog с фильтрацией по полям, сохранить совместимость полей/уровней и обеспечить обратимость на время раскатки.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-13T17:46:43.03432346+07:00","created_by":"nikita","updated_at":"2026-01-13T17:46:43.03432346+07:00","dependencies":[{"issue_id":"parcer-tlu","depends_on_id":"parcer-9eq","type":"blocks","created_at":"2026-01-13T17:47:21.213783368+07:00","created_by":"nikita"},{"issue_id":"parcer-tlu","depends_on_id":"parcer-6ic","type":"blocks","created_at":"2026-01-13T17:47:23.760653804+07:00","created_by":"nikita"},{"issue_id":"parcer-tlu","depends_on_id":"parcer-3s8","type":"blocks","created_at":"2026-01-13T17:47:26.383272215+07:00","created_by":"nikita"},{"issue_id":"parcer-tlu","depends_on_id":"parcer-xhl","type":"blocks","created_at":"2026-01-13T17:47:29.68420905+07:00","created_by":"nikita"},{"issue_id":"parcer-tlu","depends_on_id":"parcer-bjt","type":"blocks","created_at":"2026-01-13T17:47:32.451801562+07:00","created_by":"nikita"}]}
{"id":"parcer-tra","title":"Add timeout management for FTP operations","description":"Add configurable timeouts in pkg/ftp for download/upload/list operations. Prevent infinite hangs on network issues.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:31.149235639+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.377161744+07:00","closed_at":"2026-01-06T19:01:34.377161744+07:00","close_reason":"Closed"}
{"id":"parcer-u5a","title":"Rewrite export/unload queries to use tx_* tables","description":"Update UNION ALL export query and any read APIs to source tx_* tables with expected aliases for webhook responses.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T19:07:56.851345294+07:00","created_by":"nikita","updated_at":"2026-01-07T20:01:52.31023454+07:00","closed_at":"2026-01-07T20:01:52.31023454+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-u5a","depends_on_id":"parcer-bkh","type":"blocks","created_at":"2026-01-07T19:13:13.534221807+07:00","created_by":"nikita"}]}
{"id":"parcer-u7x","title":"Implement feature flags system","description":"Add feature flags in pkg/features/flags.go. Toggle parallel processing, caching, metrics export without code changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:55.849584991+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.069961782+07:00","closed_at":"2026-01-06T19:01:36.069961782+07:00","close_reason":"Closed"}
{"id":"parcer-ued","title":"Add configuration validation","description":"Validate config on startup in pkg/config/validator.go. Check required fields, port ranges, connection counts. Fail fast on invalid config.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:05.490025318+07:00","created_by":"nikita","updated_at":"2026-01-05T10:59:21.114845773+07:00","closed_at":"2026-01-05T10:59:21.114845773+07:00","close_reason":"Closed"}
{"id":"parcer-uis","title":"Add table-driven tests","description":"Convert existing tests to table-driven format in pkg/parser/*_test.go. Reduces duplication, easier to add test cases, better coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:32.77348871+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.908525457+07:00","closed_at":"2026-01-06T19:01:34.908525457+07:00","close_reason":"Closed"}
{"id":"parcer-vbf","title":"Add repository pattern decorators","description":"Create repository decorators in pkg/repository/decorators.go for caching, metrics, retries. Enables cross-cutting concerns without changing core logic.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:29.541530368+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.65161537+07:00","closed_at":"2026-01-06T19:01:34.65161537+07:00","close_reason":"Closed"}
{"id":"parcer-vi0","title":"Implement configuration schema versioning","description":"Add versioned config schema in pkg/config/schema.go with auto-migration. Supports KASSA_STRUCTURE format changes without breaking existing configs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:31.784240789+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.152074707+07:00","closed_at":"2026-01-06T19:01:35.152074707+07:00","close_reason":"Closed"}
{"id":"parcer-w7e","title":"Separate service layer from infrastructure","description":"Create pkg/domain, pkg/services, pkg/infrastructure layers. Separate business logic from FTP/DB concerns. Improves testability.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:54:29.824546369+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:34.57905109+07:00","closed_at":"2026-01-06T19:01:34.57905109+07:00","close_reason":"Closed"}
{"id":"parcer-w82","title":"Create unified retry framework","description":"Build retry policy in pkg/resilience/retry.go with exponential backoff. Consolidates scattered retry logic, configurable per-operation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:54.993492899+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.253107853+07:00","closed_at":"2026-01-06T19:01:36.253107853+07:00","close_reason":"Closed"}
{"id":"parcer-wto","title":"Implement API unit tests via httptest for core endpoints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:20:41.269685978+07:00","created_by":"nikita","updated_at":"2026-01-10T14:24:37.948970992+07:00","closed_at":"2026-01-10T14:24:37.948970992+07:00","close_reason":"Added httptest-based API unit tests for core endpoints","dependencies":[{"issue_id":"parcer-wto","depends_on_id":"parcer-dlp","type":"blocks","created_at":"2026-01-10T14:20:50.070703267+07:00","created_by":"nikita"}]}
{"id":"parcer-x11","title":"Update TRANSACTION_TABLES_SPEC zero-value notes","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T13:36:49.464209196+07:00","created_by":"nikita","updated_at":"2026-01-08T13:44:18.859166472+07:00","closed_at":"2026-01-08T13:44:18.859166472+07:00","close_reason":"Spec zero-value notes updated and verified","dependencies":[{"issue_id":"parcer-x11","depends_on_id":"parcer-j1q","type":"blocks","created_at":"2026-01-08T13:37:06.039952841+07:00","created_by":"nikita"},{"issue_id":"parcer-x11","depends_on_id":"parcer-7bn","type":"blocks","created_at":"2026-01-08T13:37:08.956886068+07:00","created_by":"nikita"},{"issue_id":"parcer-x11","depends_on_id":"parcer-89g","type":"blocks","created_at":"2026-01-08T13:37:11.951892537+07:00","created_by":"nikita"}]}
{"id":"parcer-xhl","title":"Валидация логов и фильтра","description":"Провести проверку вывода: unit/интеграционные тесты ключевых путей (enqueue/process/shutdown), ручная проверка JSON-логов и фильтрации, убедиться в паритете полей/уровней и в отсутствии регрессий в центральном логировании.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T17:47:00.219875567+07:00","created_by":"nikita","updated_at":"2026-01-13T18:21:23.051822123+07:00","closed_at":"2026-01-13T18:21:23.051822123+07:00","close_reason":"Completed","dependencies":[{"issue_id":"parcer-xhl","depends_on_id":"parcer-3s8","type":"blocks","created_at":"2026-01-13T17:47:14.888102197+07:00","created_by":"nikita"}]}
{"id":"parcer-y6o","title":"Enhance health check endpoint","description":"Add dependency checks (DB, FTP, queue, disk) to /api/health endpoint. Return detailed status with latency metrics and connection pool stats.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:02.925077545+07:00","created_by":"nikita","updated_at":"2026-01-05T11:00:39.729351226+07:00","closed_at":"2026-01-05T11:00:39.729351226+07:00","close_reason":"Closed"}
{"id":"parcer-yfj","title":"Define audit scope and assets","description":"Scope context collected from docs + answers: environments in scope: dev and prod, both in cloud. Data sensitivity: customer loyalty identifiers and phone numbers. Components: Go Frontol ETL (Go 1.24+), Docker Compose or systemd deploy, PostgreSQL 17+ external cluster, FTP integration, webhook HTTP API with optional bearer token. Data flow: async ETL via POST /api/load -\u003e FTP request/response -\u003e parse -\u003e load to DB -\u003e optional webhook report. External integrations: only webhook status reporting; no monitoring/SIEM. Roles: single admin role; credentials not issued/rotated. Availability/SLA: none specified. Backups/DR: only DB backups; no other DR/logging processes noted. Security notes in docs: secrets via env, DB SSL mode, firewall/TLS recommendations.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-12T15:35:19.716726932+07:00","created_by":"nikita","updated_at":"2026-01-12T15:42:30.651661689+07:00"}
{"id":"parcer-yox","title":"Implement dead letter queue","description":"Add DLQ in pkg/queue/dlq.go with database storage. Failed ETL runs stored for retry/analysis. API endpoints for retry and viewing failures.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:54:55.255635417+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:36.195383441+07:00","closed_at":"2026-01-06T19:01:36.195383441+07:00","close_reason":"Closed"}
{"id":"parcer-z4m","title":"Fix race condition in queue workers","description":"Fix race condition in pkg/pipeline - workers may access shared state unsafely. Quick win, high impact on stability.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T09:54:01.029963064+07:00","created_by":"nikita","updated_at":"2026-01-05T10:36:00.547699038+07:00","closed_at":"2026-01-05T10:36:00.547699038+07:00","close_reason":"Closed"}
{"id":"parcer-zil","title":"Add streaming parser for large files","description":"Create StreamingParser in pkg/parser/streaming.go. Process files line-by-line instead of loading entirely into memory. Constant memory usage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T09:56:00.264761383+07:00","created_by":"nikita","updated_at":"2026-01-06T19:01:35.659457641+07:00","closed_at":"2026-01-06T19:01:35.659457641+07:00","close_reason":"Closed"}
{"id":"parcer-zum","title":"Фаза 3.1: Unit тесты для pkg/parser/dispatcher.go","description":"Создать pkg/parser/dispatcher_test.go с тестами для GetTransactionType.\n\nСТРАТЕГИЯ КОНСИСТЕНТНОСТИ (приемлема):\n1. Все 57 поддерживаемых типов работают (1,2,3,4,6,9,10,11,...)\n2. Негативные (-1,0,5,7,8,9999,MaxInt) → error\n3. Проверка количества: supportedTypes \u003e= len(TxSchemas)\n\n⚠️ Алиасы (1 и 11 → одна схема) - это НОРМАЛЬНО\nПроверяем ВАЛИДНОСТЬ каждого, НЕ идентичность Description/Parser\n\n50+ схем в TxSchemas, 57+ type codes в dispatcher.\n\nПокрытие ~45 тест-кейсов. Прирост: +8%","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T14:22:36.05173245+07:00","created_by":"nikita","updated_at":"2026-01-12T12:36:29.15552441+07:00","closed_at":"2026-01-10T00:12:47.573526534+07:00","dependencies":[{"issue_id":"parcer-zum","depends_on_id":"parcer-sfq","type":"parent-child","created_at":"2026-01-08T14:26:58.051952281+07:00","created_by":"nikita"}]}
