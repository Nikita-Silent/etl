# Environment variables for Docker Compose
# Copy this file to .env and adjust values for your environment

# Database Configuration (External PostgreSQL Cluster)
# IMPORTANT: PostgreSQL runs in a separate cluster, not in Docker Compose
DB_HOST=your_postgres_host      # IP or hostname of your PostgreSQL cluster
DB_PORT=5432
DB_USER=frontol_user
DB_PASSWORD=secure_password_change_me
DB_NAME=kassa_db
DB_SSLMODE=disable              # Use 'require' for production with SSL

# FTP Server Configuration
PUBLICHOST=                     # Public hostname/IP for FTP passive mode (optional)
                                # If not set, will auto-detect host IP address
                                # Set explicitly if auto-detection doesn't work for your setup
                                # Examples:
                                #   - (empty) - auto-detect from hostname -I
                                #   - localhost (for local connections only)
                                #   - 192.168.1.100 (your server IP)
                                #   - host.docker.internal (Docker Desktop)
                                #   - your-domain.com (if you have DNS)
FTP_HOST=ftp-server             # FTP server hostname (internal Docker network)
FTP_PORT=21
FTP_USER=frontol
FTP_PASSWORD=frontol123         # Change in production!
# FTP_ROOT_PATH is auto-generated as /home/ftp/${FTP_USER} if not set
# FTP_ROOT_PATH=/home/ftp/frontol  # Optional: override default path
FTP_REQUEST_DIR=/request
FTP_RESPONSE_DIR=/response
# FTP directory ownership (must match FTP server user UID/GID)
FTP_UID=1000                    # UID for FTP directories owner (default: 1000)
FTP_GID=1000                    # GID for FTP directories owner (default: 1000)
FTP_OWNER_USER=ftpuser          # Username for FTP directories owner (default: ftpuser)
FTP_OWNER_GROUP=ftpgroup        # Group name for FTP directories owner (default: ftpgroup)
PASV_MIN_PORT=30000             # Minimum port for passive mode
PASV_MAX_PORT=30009             # Maximum port for passive mode
KASSA_STRUCTURE=P13:P13;N22:N22_Inter,N22_FURN;SH54:SH54;S6:S6;L98:L98;L32:L32;S39:S39;O49:O49;L28:L28

# Application Configuration
LOCAL_DIR=/app/tmp/frontol
BATCH_SIZE=1000
MAX_RETRIES=3
RETRY_DELAY_SECONDS=5
WAIT_DELAY_MINUTES=1
LOG_LEVEL=info

# RabbitMQ Configuration (credentials are generated with scripts/gen-rabbitmq-credentials.sh)
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_VHOST=/
RABBITMQ_DEFAULT_USER=
RABBITMQ_DEFAULT_PASS=
RABBITMQ_URL=
RABBITMQ_MANAGEMENT_URL=http://rabbitmq:15672
RABBITMQ_PREFETCH=1
QUEUE_RETRY_MAX=5
QUEUE_RETRY_BACKOFFS=60000,300000,900000,1800000,3600000
QUEUE_DLQ_REQUEUE_INTERVAL_SECONDS=600
QUEUE_DECLARE_ON_PUBLISH=true
QUEUE_PROVIDER=rabbitmq   # rabbitmq|memory (load consumer implemented; download stays in-memory)

# Webhook Configuration
SERVER_PORT=8080             # HTTP port for webhook server
WEBHOOK_REPORT_URL=
WEBHOOK_TIMEOUT_MINUTES=0    # Timeout in minutes for sending webhook report (0 = no timeout, send only on completion)
WEBHOOK_BEARER_TOKEN=

# Production overrides (uncomment for production)
# DB_PASSWORD=your_secure_production_password
# FTP_PASSWORD=your_secure_ftp_password
# WEBHOOK_REPORT_URL=https://your-monitoring-system.com/api/etl-reports
# WEBHOOK_TIMEOUT_MINUTES=1
# WEBHOOK_BEARER_TOKEN=your-secret-token-here
